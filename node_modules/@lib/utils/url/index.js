var appendQuery = require('append-query'),
    utils = {};

utils.addShareParams = function (url) {
    return appendQuery(url, {
        'utm_m_medium': 't',
        'utm_m_source': 'facebook',
        'utm_source': 'facebook'
    });
};

utils.addCampaignParams = function (url, campaign, token) {
    return appendQuery(url, {
        'utm_m_medium': 'cpc',
        'utm_m_source': 'facebook',
        'utm_m_campaign': campaign,
        'utm_m_token': token,
        'utm_source': 'facebook'
    });
};

utils.addExperimentParams = function (url, experiment) {
    return appendQuery(url, {
        'utm_m_medium': 'cpc',
        'utm_m_source': 'facebook',
        'utm_m_campaign': 'exp_' + experiment,
        'utm_m_token': '1',
    });
};

utils.addUTM = function (url, utm) {
    var params = {};

    Object.keys(utm).forEach(function (key) {
        if (utm[key]) {
            params[key] = utm[key];
        }
    });
    return appendQuery(url, params);
};

module.exports = utils;
