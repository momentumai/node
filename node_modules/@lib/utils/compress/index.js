
module.exports.sumByCount = function (data, count) {
    var i,
        j,
        keys = Object.keys(data).sort().reverse(),
        rowLength = Math.floor(keys.length / count),
        iterator,
        res = {};

    for (i = 0; i < count; i += 1) {
        res[keys[i * rowLength]] = 0;
        for (j = 0; j < rowLength; j += 1) {
            iterator = i * rowLength + j;
            res[keys[i * rowLength]] += Number(data[keys[iterator]]) || 0;
        }
    }

    return res;
};

module.exports.objectSumByCount = function (data, count) {
    var i,
        j,
        keys = Object.keys(data).sort().reverse(),
        rowLength = Math.floor(keys.length / count),
        iterator,
        row,
        obj,
        res = {};

    for (i = 0; i < count; i += 1) {
        row = i * rowLength;
        res[keys[row]] = {};
        for (j = 0; j < rowLength; j += 1) {
            iterator = row + j;
            obj = data[keys[iterator]];
            Object.keys(obj).forEach(function (subKey) {
                res[keys[row]][subKey] = res[keys[row]][subKey] || 0;
                res[keys[row]][subKey] += Number(obj[subKey]) || 0;
            });
        }
    }

    return res;
};
