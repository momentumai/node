var path = require('path'),
    db = require('@lib/resources/db'),
    sqlUtils = require('@lib/utils/sql'),
    q = sqlUtils.getQueries(path.join(__dirname, 'sql')),
    admin = {};

admin.getInactive = function () {
    throw 'Unimplemented';
};

admin.setInactive = function () {
    throw 'Unimplemented';
};

admin.getPayment = function (teamId, pool) {
    return db.q(q['get_team'], {
        'team_id': teamId
    }, pool).then(function (rows) {
        var amount = rows[0] && Number(rows[0].payment_amount) || 0,
            name = rows[0] && rows[0].name || '';

        return {
            'status': Boolean(amount),
            'name': name,
            'amount': amount
        };
    });
};

admin.setPayment = function (teamId, amount, pool) {
    return db.q(q['set_team'], {
        'team_id': teamId,
        'payment_amount': amount
    }, pool).then(function () {
        return 'success';
    });
};

module.exports = admin;
