var ds = require('@lib/resources/ds'),
    listFormat = require('@lib/model/experiment/listFormat');

function parseParams (p) {
    var params = {};

    params.team_id = p.team_id || 0;
    params.content_id = p.content_id;

    return params;
}

module.exports = function (params, token) {
    params = parseParams(params);

    return ds.get(
        'Experiment',
        [params.content_id],
        params.team_id
    ).then(function (items) {
        return listFormat(params, items, token);
    }).then(function (result) {
        return result && result[0] || {};
    });
};
